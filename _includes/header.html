<span class="mobile btn-mobile-menu">
  <i class="icon icon-list btn-mobile-menu__icon"></i>
  <i class="icon icon-x-circle btn-mobile-close__icon hidden"></i>
</span>

<!-- <header class="panel-cover" style="background-image: url({{ "images/cover.jpg" | prepend: site.baseurl }})"> -->
<header class="panel-cover">
  <div class="panel-main">

    <div class="panel-main__inner panel-inverted" id="topmost-layer">
    <div class="panel-main__content">
        <a href="{{ site.baseurl }}" title="link to home of {{ site.title }}">
          <img src="{{ "images/profile.png" | prepend: site.baseurl }}" class="user-image" alt="My Profile Photo">
          <h1 class="panel-cover__title panel-title">{{ site.title }}</h1>
        </a>
        <hr class="panel-cover__divider">
        <p class="panel-cover__description">{{ site.description }}</p>
        <hr class="panel-cover__divider panel-cover__divider--secondary">

        <div class="navigation-wrapper">

          <nav class="cover-navigation cover-navigation--primary">
            <ul class="navigation">
              <li class="navigation__item"><a href="{{ site.baseurl }}#blog" title="link to {{ site.title }} blog" class="blog-button">Blog</a></li>
              <li class="navigation__item"><a href="{{ site.baseurl }}about" title="about">About</a></li>
            </ul>
          </nav>

          <nav class="cover-navigation navigation--social">
            <ul class="navigation">

            {% if site.author.twitter_username %}
              <!-- Twitter -->
              <li class="navigation__item">
                <a href="http://twitter.com/{{ site.author.twitter_username }}" title="@{{ site.author.twitter_username }} on Twitter" target="_blank">
                  <i class="icon icon-social-twitter"></i>
                  <span class="label">Twitter</span>
                </a>
              </li>
            {% endif %}

            {% if site.author.facebook_username %}
              <!-- Facebook -->
              <li class="navigation__item">
                <a href="http://fb.me/{{ site.author.facebook_username }}" title="{{ site.author.facebook_username }} on Facebook" target="_blank">
                  <i class="icon icon-social-facebook"></i>
                  <span class="label">Facebook</span>
                </a>
              </li>
            {% endif %}

            {% if site.author.linkedin_username %}
              <!-- LinkedIn -->
              <li class="navigation__item">
                <a href="https://www.linkedin.com/in/{{ site.author.linkedin_username }}" title="{{ site.author.linkedin_username }} on LinkedIn" target="_blank">
                  <i class="icon icon-social-linkedin"></i>
                  <span class="label">LinkedIn</span>
                </a>
              </li>
            {% endif %}

            {% if site.author.github_username %}
              <!-- GitHub -->
              <li class="navigation__item">
                <a href="https://www.github.com/{{ site.author.github_username }}" title="{{ site.author.github_username }} on GitHub" target="_blank">
                  <i class="icon icon-social-github"></i>
                  <span class="label">GitHub</span>
                </a>
              </li>
            {% endif %}

            {% if site.author.youtube_channel_id %}
              <!-- YouTube -->
              <li class="navigation__item">
                <a href="https://www.youtube.com/channel/{{ site.author.youtube_channel_id }}" title="{{ site.author.youtube_channel_id }} on YouTube" target="_blank">
                  <i class="icon icon-social-youtube"></i>
                  <span class="label">YouTube</span>
                </a>
              </li>
            {% endif %}

            {% if site.author.email %}
              <!-- Email -->
              <li class="navigation__item">
                <a href="mailto:{{ site.author.email }}" title="Email" id="4g3bsfsafw">
                  <i class="icon icon-mail"></i>
                  <span class="label">Email</span>
                </a>
              </li>
            {% endif %}

            <!-- RSS -->
            <li class="navigation__item">
              <a href="{{ "feed.xml" | prepend: site.baseurl }}" title="Subscribe" target="_blank">
                <i class="icon icon-rss"></i>
                <span class="label">RSS</span>
              </a>
            </li>
          
            </ul>
          </nav>

        </div>

      </div>

    </div>

    <!-- <div class="panel-cover--overlay"></div> -->
  </div>
</header>




<!-- Anit-spam bot security for email address -->
<script>
document.getElementById("4g3bsfsafw").href = document.getElementById("4g3bsfsafw").href.replace(new RegExp('x', 'g'), '').replace(new RegExp('!', 'g'), '@');
</script>



<!-- GLSL eyecandy: style for positioning canvas -->
<style>
canvas {
  width: 100%;
  height: 100%;
  position: absolute;
  top: 0;
  left: 0;
  z-index: -1;
}
</style>



<!-- GLSL eyecandy: vertex shader -->
<script id="vs" type="not-js">
void main()	{
  gl_Position = vec4( position, 1.0 );
}
</script>



<!-- GLSL eyecandy: pixel shader -->
<script id="fs-other" type="not-js">
precision mediump float;

uniform float time;
uniform vec2 mouse;
uniform vec2 resolution;

void main()	{

  vec2 position;
  position = (gl_FragCoord.xy / resolution.xy) + mouse / 5.0;
  position = (position * resolution.xy) / resolution.y;

  float t = time/2.0;
  float color = 0.0;
  color += sin(position.x * cos(t / 23.0) * 90.0) + cos(position.y * cos(t / 11.0) * 20.0);
  color -= sin(position.y * sin(t / 17.0) * 60.0) + cos(position.x * sin(t / 19.0) * 30.0);
  color += sin(position.x * sin(t / 11.0) * 30.0) + sin(position.y * sin(t / 34.0) * 50.0);
  color -= sin(position.x * sin(t /  7.0) * 15.0) + sin(position.y * sin(t / 48.0) * 90.0);
  color *= sin(t / 10.0) * 0.5;
  vec4 c = vec4(vec3(color, color * 0.7, sin(color + t / 2.0) * 0.9), 1.0);
  //c = vec4(c.b, c.r, c.g, 1.0);
  c = clamp(c, 0.0, 0.5);

  gl_FragColor = c;
}
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r74/three.min.js"></script>


<script id="fs-old" type="not-js">
#ifdef GL_ES
precision mediump float;
#endif

uniform float time;
uniform vec2 mouse;
uniform vec2 resolution;

void main( void ) {
	
	vec2 pos = ( gl_FragCoord.xy / resolution.xy ) - vec2(0.5,0.5);	

  pos.y = -pos.y;

        //float horizon = -0.3*cos(mouse.y*10.0/3.0); 
        float horizon = -0.3*mouse.y;

        float fov = 0.6;
	float scaling = 0.61;
	
	vec3 p = vec3(pos.x, fov, pos.y - horizon);
	//float a = -mouse.x*0.1*time;
	float a = 0.1*time;
	vec3 q = vec3(p.x*cos(a)+p.y*sin(a), p.x*sin(a)-p.y*cos(a),p.z);
	vec2 s = vec2(q.x/q.z, q.y/q.z) * scaling;

	//checkboard texture
	//float color = sign((mod(s.x, 0.1) - 0.05) * (mod(s.y, 0.1) - 0.05));	
	float color = sign((mod(s.x, 0.1) - 0.05));
  color += 2.0;
	//fading
	color *= p.z*p.z*(8.0+2.0*sin(time*3.));
	
	//gl_FragColor = vec4( color*vec3(1.0, s.x, s.y), 1.0 );
	gl_FragColor = vec4( color*vec3(s.x, s.y, s.y), 1.0 );
	gl_FragColor -= 0.2;
}
</script>


<script id="fs" type="not-js">
#ifdef GL_ES
precision mediump float;
#endif

uniform float time;
uniform vec2 mouse;
uniform vec2 resolution;


const float pi = 3.14159265359;

  float rate = 0.05;
  float size = 150.0;
  float seed1 = 0.05;
  float seed2 = 1.0;
  float phase1 = 0.77;
  float phase2 = 10.0;
  float freq = 0.1;
  float pulse = 0.5;
  bool invert = false;
  bool flip = false;
  bool flop = false;

//////// image
#define PULSE(a,b,x) (step((a),(x)) - step((b),(x)))
float f(vec2 uv) {
	return PULSE(seed2, 0.1 + seed1, fract((17.77*phase1) * (uv.x / uv.y) + (21.11*phase2) * uv.x + freq * time));
}



vec4 imageCenter(bool usePos, vec2 pos) {



  //pos.x += sin(time/10.0); 
  //pos.y -= cos(time/10.0); 
  vec2 uv;

  vec2 m = mouse.xy;
  //m.x += sin(time/10.0); 
  //m.y -= cos(time/12.0); 



  //usePos = true;
  // render disorted
  if (usePos) { // circle
    //pos = gl_FragCoord.xy;
    uv = pos.yx * m.yx * 2.0;
  // render normal image
  } else { // background
    //pos = gl_FragCoord.xy;
    uv = pos.xy * m.xy * 2.0;
    //uv = pos * m / 10.0;
    //uv = ceil((302.-size) * pos.xy / (resolution.y));
  }


	float T = time * rate;
	gl_FragColor = vec4(0, 0, 0, 1);
	float light = f(uv) + f(uv + vec2(0.1, 0.1));
	gl_FragColor += vec4(light, 0.01 * light, 0.01, 1.0);
	float back = 0.2 * sin(11.71 * uv.x + T) + mix(0.01, 0.2 + sin(pulse * time), cos(55.21 * dot(uv.y, uv.x) + 3.0 + 0.2 * T)); 
	vec4 fx = vec4(back, back, back, 1.0);
	vec4 gfc = fx;

  vec4 outCol = vec4(gfc);
	//if (flip) outCol = vec4(outCol.grba);
	//if (invert) outCol /= vec4 (1.0-outCol.rgb,1.0);
	//if (flop) outCol = outCol.brga;

  //outCol = gl_FragColor;

  return outCol;
}
//////// image END








vec4 color1 = vec4(0.0, 0.0, 0.0, 1.0);
vec4 color2 = vec4(1.0, 1.0, 1.0, 1.0);
float width = 2.0;
float softness = 0.5;
float count = 10.0;


vec4 imageBackground() {
  float rotation = mod(time/10.0, 1.0);
	vec4 out_color = color1;

	vec2 vv_FragNormCoord = ( gl_FragCoord.xy / resolution.xy );
	//	convert to polar coordinates
	vec2 loc = vec2(vv_FragNormCoord[0],vv_FragNormCoord[1]);
	loc.y = (loc.y - 0.5) * resolution.y / resolution.x + 0.5;
	float r = 2.0 * count * distance(vec2(0.5,0.5), loc) + width;
	float theta = atan ((loc.y-0.5),(loc.x-0.5));

	loc.y = r * sin(theta + 2.0 * pi * rotation) + 0.5;

	if (loc.y < 0.5)	{
		theta = theta + 2.0 * pi;
		theta = mod(theta + rotation * 2.0 * pi, 2.0 * pi);
		theta = (theta + 2.0 * pi * floor(r - width));
	}
	else	{
		theta = mod(theta + rotation * 2.0 * pi, 2.0 * pi);
		theta = (theta + 2.0 * pi * floor(r + width));
	}

	if (width == 0.0)	{
		out_color = color1;
	} else 	{
		float dist = abs(r - theta/(2.0*pi));
		if (dist < width)	{
			if (dist > width * (1.0-softness))	{
				out_color = mix(color2, color1, (dist - width * (1.0-softness))/(width - width * (1.0-softness)));
			}
			else	{
				out_color = color2;
			}
		}
	}

	return out_color;
}








void main( void ) {
	//vec2 isf_FragNormCoord = ( gl_FragCoord.xy / resolution.xy ) - vec2(0.5,0.5);	
	vec2 isf_FragNormCoord = ( gl_FragCoord.xy / resolution.xy );
	//float a = 0.1*time;

  // exposed stuffs
  vec3 colorInput = vec3(1.0, 0.0, 0.0);
  float radius = 0.30; // fill whole screen
  float angle = 0.5;
  float speedParam = 0.5;
  float level = 0.0;
  vec2 pointInput = vec2(0.5);


	gl_FragColor = vec4(0.4);
  //vec2 mouse = pointInput;
	vec2 uv = isf_FragNormCoord.xy;
    float timeParam = time *  speedParam * 1.5;
    float m = 0.5;
    vec2 ak = isf_FragNormCoord.xy-0.5;
    float a = angle;
    ak = mat2(cos(a),-sin(a),sin(a),cos(a)) * ak + .5;
	  ak.y-=0.5;
    ak.y*=0.005;
    ak.y+=0.5;
    ak.y = m;
    //vec4 fu = IMG_NORM_PIXEL(inputImage, ak);
    //vec4 bgi = IMG_NORM_PIXEL(backgroundImage, isf_FragNormCoord);
    vec4 fu = imageCenter(true, ak);
    //vec4 bgi = imageBackground();
     vec4 bgi = imageCenter(false, ak);
    //vec4 bgi = IMG_NORM_PIXEL(backgroundImage, isf_FragNormCoord);
    bgi.rgb *= colorInput.rgb;
    
    vec3 blur    = vec3(.1,      .3,     .2) * 3.1;   
    vec3 speed   = vec3(1.3,    .14,    2.12),
    // amplitude  = vec3(.223,  .21,   .14),
     amplitude  = vec3(fu.r,  fu.g,  fu.b),
     frequency  = vec3(2.12,   4.6,   7.5) * .2,
     wave = vec3( sin(uv.x * frequency - timeParam * speed) * amplitude + level ),
     smoothwave = vec3(smoothstep(wave, wave + blur, uv.yyy));
     
     float ratio = resolution.x/resolution.y;
     vec2 ce = isf_FragNormCoord.xy -0.5;
     ce.x*=ratio;
     
     float k = distance(ce,pointInput-0.5);
     float d = smoothstep(k/0.99,k,radius);
     //d = 0.1;
	 vec3 final = mix(bgi.rgb,smoothwave,d);

	gl_FragColor = vec4(final,1.0);
}
</script>






<!-- GLSL eyecandy: Three.js renderer -->
<script>
var $ = document.querySelector.bind(document);

var camera = new THREE.Camera();
camera.position.z = 1;

var scene = new THREE.Scene();

var geometry = new THREE.PlaneBufferGeometry(2, 2);

var uniforms = {
  time: { type: "f", value: 1.0 },
  resolution: { type: "v2", value: new THREE.Vector2() },
  mouse: { type: "v2", value: new THREE.Vector2() },
};

var material = new THREE.ShaderMaterial({
  uniforms: uniforms,
  vertexShader: $('#vs').text,
  fragmentShader: $('#fs').text,
});

var mesh = new THREE.Mesh(geometry, material);
scene.add(mesh);

var renderer = new THREE.WebGLRenderer();

var topElement = document.getElementById("topmost-layer");
topElement.insertBefore(renderer.domElement, topElement.firstChild);

document.body.addEventListener('mousemove', recordMousePosition);

render(0);

function recordMousePosition(e) {
  // normalize the mouse position across the canvas
  // so in the shader the values go from -1 to +1
  var canvas = renderer.domElement;
  var rect = canvas.getBoundingClientRect();

  uniforms.mouse.value.x = (e.clientX - rect.left) / canvas.clientWidth  *  2 - 1;
  uniforms.mouse.value.y = (e.clientY - rect.top ) / canvas.clientHeight * -2 + 1;
}

function resize() {
  var canvas = renderer.domElement;
  var dpr    = window.devicePixelRatio;  // make 1 or less if too slow
  var width  = canvas.clientWidth  * dpr;
  var height = canvas.clientHeight * dpr;
  if (width != canvas.width || height != canvas.height) {
    renderer.setSize( width, height, false );
    uniforms.resolution.value.x = renderer.domElement.width;
    uniforms.resolution.value.y = renderer.domElement.height;
  }
}

function render(time) {
  resize();
  uniforms.time.value = time * 0.001;
  renderer.render(scene, camera);
  requestAnimationFrame(render);
}
</script>
